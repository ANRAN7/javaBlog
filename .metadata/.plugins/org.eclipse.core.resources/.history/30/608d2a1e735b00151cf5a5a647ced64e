package net.peace.io;

import java.io.BufferedInputStream;
import java.io.BufferedOutputStream;
import java.io.DataInputStream;
import java.io.DataOutput;
import java.io.DataOutputStream;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;
import java.sql.Date;
/*
 *此类用来测试过滤流，包括buff和data流
 */
public class StreamBUff {
	/*
	*********************************************************************************************************
	*                                        testbuff()
	*
	* Description ： This function test BufferedInputStream and BufferedOutputStream.
	*
	* Arguments   : None.
	*
	* Returns     : None
	*
	* Note(s)     : None
	* 
	* Author      ：peace 
	*********************************************************************************************************
	*/
	public void testbuff(){
		long starttime=new java.util.Date().getTime();
		BufferedInputStream Bio=null;
		BufferedOutputStream Bos=null;
		try {
			//Arguments InputStream
			Bio=new BufferedInputStream(new FileInputStream("/home/peace/if.py"));
			//Arguments  OutputStream
			Bos=new BufferedOutputStream(new FileOutputStream("/home/peace/if1.py"));
			//Buffer
			byte[] buf=new byte[1024];
			int len=0;
			//read
			while((len=Bio.read(buf))>=0){
				//copy
				Bos.write(buf,0,len);
			}
		} catch (FileNotFoundException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		} catch (IOException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}finally {
			//releases any system resources 
			if(Bio!=null){
				try {
					Bio.close();
				} catch (IOException e) {
					// TODO Auto-generated catch block
					e.printStackTrace();
				}
			}
			if(Bos!=null){
				try {
					Bos.close();
				} catch (IOException e) {
					// TODO Auto-generated catch block
					e.printStackTrace();
				}
			}
		}
		//test time
		long endtime=new java.util.Date().getTime();
		System.out.println((endtime-starttime));
	}
	public void testData(){
		DataInputStream dio=null;
		DataOutputStream dos=null;
		try {
			dio=new DataInputStream(new FileInputStream("/home/peace/1.data"));
			dos=new DataOutputStream(new FileOutputStream("/home/peace/1.data"));
			dos.writeInt(11);
			dos.writeInt(22);
			dos.writeInt(66);
			dos.writeInt(55);
			dos.writeInt(44);
			dos.writeInt(33);
			
			int len=0;
			while((len=dio.readInt())>=0){
				System.out.println(len);
			}
		} catch (FileNotFoundException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		} catch (IOException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}finally {
			if(dio!=null){
				try {
					dio.close();
				} catch (IOException e) {
					// TODO Auto-generated catch block
					e.printStackTrace();
				}
			}
			if(dos!=null){
				try {
					dos.close();
				} catch (IOException e) {
					// TODO Auto-generated catch block
					e.printStackTrace();
				}
			}
		}
	}
	public static void main(String[] args) {
		StreamBUff streamBUff=new StreamBUff();
		//test buff
		streamBUff.testbuff();
		//test data
		streamBUff.testData();
	}

}
